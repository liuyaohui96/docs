## Cookie的需求
因为HTTP协议是无状态的，HTTP协议自身不对请求和响应之间的通信状态进行保存（服务器不知道用户上一次做了什么，这严重阻碍了交互式Web应用程序的实现）。于是，服务器引入cookie，通过设置或读取Cookies保持通信状态。

应用常见举例：购物场景中，当用户选购了第一项商品，服务器在向用户发送网页的同时，还发送了一段Cookie，记录着那项商品的信息。当用户访问另一个页面，浏览器会把Cookie发送给服务器，于是服务器知道他之前选购了什么。用户继续选购饮料，服务器就在原来那段Cookie里追加新的商品信息。结帐时，服务器读取发送来的Cookie

## Cookie的特点
Cookie 有以下特点：
1. HTTP请求头重自动携带。Cookie，又叫 HTTP cookie, Cookie 通过 HTTP Header 发送。

2. 作用域：Cookie 绑定在特定的域名下。不同的域不能访问，同一个域不同文件可以访问。

3. 生命周期：默认是临时存储（关闭浏览器即消失，长时间存储需要设置过期时间）
3. 数量大小限制：以前每个域名只能有 20 个 cookie，现在浏览器基本没有这个限制， 但 web 服务器一般会对 cookie 较多的请求响应错误。一般每个域名设置 50 个 cookie，大小共 4kb 是安全的。


Cookie是开发人员可以选用的一种古老的，稳定的客户端存储形式，现在已经不建议使用它，实在要使用 cookie，建议仅存储用户偏好信息和基本信息(姓名，年龄等)。

Cookie随每个请求一起发送，因此它们可能会降低性能（尤其是对于移动数据连接而言）。现代客户端存储推荐使用Web storage API（localstorage & sessionstorage） 或者 IndexedDB



## Cookie的主要用途
1. session 管理。用户，购物车，游戏分数等不敏感信息
2. 用户的个性化配置

## Cookie的缺陷
1. Cookie 不够大。Cookie的大小限制在4KB左右，对于复杂的存储需求来说是不够用的。这样看来，Cookie 只能用来存取少量的信息。此外很多浏览器对一个站点的cookie个数也是有限制的。
2. 过多的 Cookie 会带来巨大的性能浪费。Cookie 是紧跟域名的。同一个域名下的所有请求，都会携带 Cookie，仅仅是请求一张图片或者一个 CSS 文件，也要携带一个 Cookie（关键是 Cookie 里存储的信息并不需要），会造成资源浪费。
    * 解决：cookie是用来维护用户信息的，而域名(domain)下所有请求都会携带cookie，但对于静态文件的请求，携带cookie信息根本没有用，此时可以通过cdn（存储静态文件的）的域名和主站的域名分开来解决。
3. 安全性：由于在HTTP请求中的Cookie是明文传递的，所以安全性成问题，除非用HTTPS


## cookie 的构成

1. name: name 必须是经过 URL 编码
2. value: value 必须是经过 URL 编码
3. doman: 设置指定域名才能发送 cookie
4. path: 指定域中的某个路径应该向服务器发送 cookie
5. expires: 失效时间
6. secure: 安全标志,指定后，cookie 只有在 SSL 连接才能发送到服务器。