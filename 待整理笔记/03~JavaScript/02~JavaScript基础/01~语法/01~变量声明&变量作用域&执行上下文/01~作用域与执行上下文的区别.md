
## 作用域与执行上下文的区别

JavaScript 属于解释型语言，执行JavaScript分为两个阶段：
1. 解释阶段，由编译器负责
  * 首先进行分词/词法分析（Tokenizing/Lexing）：将代码字符串分解为token（词法单元)。如程序`var a = 2;`这段程序通常会被分解成为下面词法单元：`var、a、=、2 、;`(空格是否会被当作词法单元，取决于空格在这门语言中是否具有意义。)
  * 解析/语法分析（Parsing）：token转换为AST(抽象语法树)
  * 编译器开始进行代码生成（将AST转换为机器可执行的代码），并且确定作用域规则（遇到变量声明和函数声明，编译器询问当前作用域是否存在已经存在该名称的标识符，如果不存在，则在作用域注册）

2. 执行阶段，有JavaScript引擎负责
  * 创建执行上下文
  * 执行代码
    * 执行代码需要使用变量，就使用作用域查找
  * 垃圾回收

所以，JavaScript解释阶段（编译阶段）已经确定作用域规则;而执行上下文属于代码执行阶段，但在代码执行之前创建

一个作用域下可能包含若干个上下文环境，也有可能从来没有过上下文环境（函数从来就没有被调用过）；同一个作用域下，不同的调用会产生不同的执行上下文环境