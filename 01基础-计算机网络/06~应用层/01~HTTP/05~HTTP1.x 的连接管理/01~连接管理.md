
## 连接管理
打开和保持连接在很大程度上影响着网站和 Web 应用程序的性能。HTTP1.x 中有多种连接模型：
1. 短连接
2. 长连接
3. HTTP流水线（HTTP pipelining）

HTTP 的传输协议主要依赖于 TCP 来提供从客户端到服务器端之间的连接。

## 短连接（Short-lived connections）
短连接是HTTP 最早期的模型， 是 HTTP/1.0 的默认模型，在 HTTP/1.1 中，只有当 Connection 被设置为 close 时才会用到这个模型。

每一个 HTTP 请求之前都会有一次 TCP 握手，即每发起一个HTTP请求都会创建一个新的连接，在收到应答时连接立即关闭，连接的生命周期很短暂，打开每一个 TCP 连接都会消耗性能，现代浏览器往往要发起很多次请求(十几个或者更多)才能拿到所需的完整信息，这个早期模型的效率低下。

## 长连接（Persistent connections）
长连接，或称为`keep-alive` 连接，也叫作持久连接，在 HTTP/1.1 里，默认就是长连接的。

长连接会保持连接去完成多次连续的请求，减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。这个连接也不会一直保留着，在空闲一段时间后会被关闭(服务器可以使用 `Keep-Alive` 协议头来指定一个最小的连接保持时间)

长连接也还是有缺点的；就算是在空闲状态，它还是会消耗服务器资源，而且在重负载时，还有可能遭受 DoS attacks 攻击

## HTTP 流水线
默认情况下，HTTP 请求是按顺序发出的。下一个请求只有在当前请求收到应答后才会被发出，由于会受到网络延迟和带宽的限制，在下一个请求被发送到服务器之前，可能需要等待很长时间。

持久连接使得多数请求以管线化（pipelining）方式发送成为可能。应用管线化（pipelining）可以同时并行发送多个请求，而不需要一个接一个地等待响应，减少了耗费在网络延迟上的时间

HTTP 流水线在现代浏览器中并不是默认被启用的，由于这些原因，流水线已经被更好的算法给代替，如 multiplexing（多路复用），已经用在 HTTP/2。