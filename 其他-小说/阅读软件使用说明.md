

# é˜…è¯»è½¯ä»¶ä½¿ç”¨è¯´æ˜

https://www.yuque.com/legado/wiki


https://mgz0227.github.io/The-tutorial-of-Legado/Rule/source.html





## ä¹¦æºä¹‹ã€ŒåŸºæœ¬ã€
ä¹¦æºURL(bookSourceUrl)

å¿…å¡«
å”¯ä¸€æ ‡è¯†ï¼Œä¸å¯é‡å¤
ä¸å…¶ä»–æºç›¸åŒä¼šè¦†ç›–
ä¹¦æºåç§°(bookSourceName)

å¿…å¡«
åå­—å¯é‡å¤
ä¹¦æºåˆ†ç»„(bookSourceGroup)

å¯ä¸å¡«
ç”¨äºæ•´ç†æº
ç™»å½•URL(loginUrl)

æ ¹æ®éœ€æ±‚ï¼Œéšæœºåº”å˜
ç”¨äºç™»å½•ä¸ªäººè´¦æˆ·
ä¹¦ç±URLæ­£åˆ™(bookUrlPattern)

å¯ä¸å¡«

æ·»åŠ ç½‘å€æ—¶ï¼Œç”¨äºè¯†åˆ«ä¹¦æº

ä¾‹:https?://www.piaotian.com/bookinfo/.*
è¯·æ±‚å¤´(header)

æ ¹æ®éœ€æ±‚ï¼Œéšæœºåº”å˜
è®¿é—®ç½‘å€æ—¶ä½¿ç”¨



## ä¹¦æºä¹‹ã€Œæœç´¢ã€
æœç´¢åœ°å€(url)

keyä¸ºå…³é”®å­—æ ‡è¯†ï¼Œé€šå¸¸å½¢æ€ä¸º{{key}}ï¼Œè¿è¡Œæ—¶ä¼šæ›¿æ¢ä¸ºæœç´¢å…³é”®å­—

ä¹Ÿå¯ä»¥å¯¹keyè¿›è¡ŒåŠ å¯†ç­‰æ“ä½œï¼Œå¦‚ï¼š{{java.base64Encode(key)}}

pageä¸ºå…³é”®å­—æ ‡è¯†ï¼Œé€šå¸¸å½¢æ€ä¸º{{page}}ï¼Œpageçš„åˆå€¼ä¸º1ä¹Ÿå¯ä»¥å¯¹pageè¿›è¡Œè®¡ç®—ï¼Œ

å¦‚ï¼š{{(page-1)*20}}ï¼Œæœ‰æ—¶ä¼šé‡åˆ°ç¬¬ä¸€é¡µæ²¡æœ‰é¡µæ•°çš„æƒ…å†µï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š

â‘  {{page - 1 == 0 ? "": page}}  

â‘¡ <,{{page}}>

æ”¯æŒç›¸å¯¹URL

ä¹¦ç±åˆ—è¡¨è§„åˆ™(bookList)

ä¹¦åè§„åˆ™(name)

ä½œè€…è§„åˆ™(author)

åˆ†ç±»è§„åˆ™(kind)

å­—æ•°è§„åˆ™(wordCount)

æœ€æ–°ç« èŠ‚è§„åˆ™(lastChapter)

ç®€ä»‹è§„åˆ™(intro)

å°é¢è§„åˆ™(coverUrl)

è¯¦æƒ…é¡µurlè§„åˆ™(bookUrl)





## ä¹¦æºä¹‹ã€Œå‘ç°ã€
å‘ç°åœ°å€è§„åˆ™(url)

pageä¸ºå…³é”®å­—æ ‡è¯†ï¼Œé€šå¸¸å½¢æ€ä¸º{{page}}ï¼Œpageçš„åˆå€¼ä¸º1ï¼Œä¹Ÿå¯ä»¥å¯¹pageè¿›è¡Œè®¡ç®—ï¼Œ

å¦‚ï¼š{{(page-1)*20}}ï¼Œæœ‰æ—¶ä¼šé‡åˆ°ç¬¬ä¸€é¡µæ²¡æœ‰é¡µæ•°çš„æƒ…å†µï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š

â‘  {{page - 1 == 0 ? "": page}}  

â‘¡ <,{{page}}>

æ ¼å¼ä¸€ï¼Œå¦‚ï¼š åç§°::http://wwwã€‚baidu.comï¼Œå‘ç°URLå¯ä½¿ç”¨&&æˆ–æ¢è¡Œç¬¦\néš”å¼€

æ ¼å¼äºŒï¼Œæœ‰5ä¸ªæ ·å¼å±æ€§(layout_flexGrowã€layout_flexShrinkã€layout_alignSelfã€layout_flexBasisPercentã€layout_wrapBefore)éœ€è¦äº†è§£ï¼Œè¯¦æƒ…è§ç®€ä¹¦ï¼Œå†™æ³•å¦‚ï¼š

 [
    {
        "title": "ä»Šæ—¥é™å…",
        "url": "https://app-cdn.jjwxc.net/bookstore/getFullPage?channel=novelfree",
        "style": {
            "layout_flexGrow": 1
        }
    },
    {
        "title": "é¢‘é“é‡‘æ¦œ",
        "url": "http://app-cdn.jjwxc.net/bookstore/getFullPage?channelBody=%7B%229%22%3A%7B%22offset%22%3A%22<,{{(page-1)*25}}>%22%2C%22limit%22%3A%2225%22%7D%7D&versionCode=148",
        "style": {
            "layout_flexGrow": 0,
            "layout_flexShrink": 1,
            "layout_alignSelf": "auto",
            "layout_flexBasisPercent": -1,
            "layout_wrapBefore": true
        }
    },
    {
        "title": "å¹»æƒ³æœªæ¥",
        "url": "http://app-cdn.jjwxc.net/bookstore/getFullPage?channelBody=%7B%2222000023%22%3A%7B%22offset%22%3A%22<,{{(page-1)*25}}>%22%2C%22limit%22%3A%2225%22%7D%7D&versionCode=148"
    }
]

    æ”¯æŒç›¸å¯¹URL

ä¹¦ç±åˆ—è¡¨è§„åˆ™(bookList)

ä¹¦åè§„åˆ™(name)

ä½œè€…è§„åˆ™(author)

åˆ†ç±»è§„åˆ™(kind)

å­—æ•°è§„åˆ™(wordCount)

æœ€æ–°ç« èŠ‚è§„åˆ™(lastChapter)

ç®€ä»‹è§„åˆ™(intro)

å°é¢è§„åˆ™(coverUrl)

è¯¦æƒ…é¡µurlè§„åˆ™(bookUrl)







## ä¹¦æºä¹‹ã€Œè¯¦æƒ…ã€
é¢„å¤„ç†è§„åˆ™(bookInfoInit)

åªèƒ½ä½¿ç”¨æ­£åˆ™ä¹‹AllInOneæˆ–è€…js

æ­£åˆ™ä¹‹AllInOneå¿…é¡»ä»¥:å¼€å¤´

jsçš„è¿”å›å€¼éœ€è¦æ˜¯jsonå¯¹è±¡ï¼Œä¾‹ï¼š

(function(){
    return {
        a:"åœ£å¢Ÿ",
        b:"è¾°ä¸œ",
        c:"ç„å¹»",
        d:"200ä¸‡å­—",
        e:"ç¬¬ä¸¤åƒç«  è¾°ä¸œè‚¾è™š",
        f:"åœ¨ç ´è´¥ä¸­å´›èµ·ï¼Œåœ¨å¯‚ç­ä¸­å¤è‹ã€‚æ²§æµ·æˆå°˜ï¼Œé›·ç”µæ¯ç«­...",
        g:"https://bookcover.yuewen.com/qdbimg/349573/1004608738/300",
        h:"https://m.qidian.com/book/1004608738"
    };
})()
æ­¤æ—¶ï¼Œä¹¦åè§„åˆ™å¡«aï¼Œä½œè€…è§„åˆ™å¡«bï¼Œåˆ†ç±»è§„åˆ™å¡«cï¼Œå­—æ•°è§„åˆ™å¡«dï¼Œæœ€æ–°ç« èŠ‚è§„åˆ™å¡«eï¼Œç®€ä»‹è§„åˆ™fï¼Œå°é¢è§„åˆ™å¡«gï¼Œç›®å½•URLè§„åˆ™å¡«h

ä¹¦åè§„åˆ™(name)

ä½œè€…è§„åˆ™(author)

åˆ†ç±»è§„åˆ™(kind)

å­—æ•°è§„åˆ™(wordCount)

æœ€æ–°ç« èŠ‚è§„åˆ™(lastChapter)

ç®€ä»‹è§„åˆ™(intro)

å°é¢è§„åˆ™(coverUrl)

ç›®å½•URLè§„åˆ™(tocUrl)

åªæ”¯æŒå•ä¸ªurl
å…è®¸ä¿®æ”¹ä¹¦åä½œè€…(canReName)

è§„åˆ™ä¸ä¸ºç©ºä¸”è¯¦æƒ…é¡µä¹¦åä¸ä¸ºç©ºï¼Œä½¿ç”¨è¯¦æƒ…é¡µä¸­çš„ä½œè€…ã€‚å¦åˆ™ï¼Œä½¿ç”¨æœç´¢é¡µä¸­çš„ä¹¦å
è§„åˆ™ä¸ä¸ºç©ºä¸”è¯¦æƒ…é¡µä½œè€…ä¸ä¸ºç©ºï¼Œä½¿ç”¨è¯¦æƒ…é¡µä¸­çš„ä½œè€…ã€‚å¦åˆ™ï¼Œä½¿ç”¨æœç´¢é¡µä¸­çš„ä½œè€…






## ä¹¦æºä¹‹ã€Œç›®å½•ã€
ç›®å½•åˆ—è¡¨è§„åˆ™(chapterList)

é¦–å­—ç¬¦ä½¿ç”¨è´Ÿå·(-)å¯ä½¿åˆ—è¡¨ååº
ç« èŠ‚åç§°è§„åˆ™(ruleChapterName)

ç« èŠ‚URLè§„åˆ™(chapterUrl)

VIPæ ‡è¯†(isVip)

å½“ç»“æœä¸ºnull false 0 ""æ—¶ä¸ºéVIP
ç« èŠ‚ä¿¡æ¯(ChapterInfo)

å¯è°ƒç”¨java.timeFormat(timestamp: Long)å°†æ—¶é—´æˆ³è½¬ä¸ºyyyy/MM/dd HH:mmæ ¼å¼çš„æ—¶é—´
ç›®å½•ä¸‹ä¸€é¡µè§„åˆ™(nextTocUrl)   

æ”¯æŒå•ä¸ªurl
æ”¯æŒurlæ•°ç»„
jsä¸­è¿”å› []æˆ– nullæˆ– ""æ—¶åœæ­¢åŠ è½½ä¸‹ä¸€é¡µ






## ä¹¦æºä¹‹ã€Œæ­£æ–‡ã€
æ­£æ–‡è§„åˆ™(content)

æ­£æ–‡å›¾ç‰‡é“¾æ¥æ”¯æŒä¿®æ”¹headers

let options = {
"headers": {"User-Agent": "xxxx","Referrer":baseUrl,"Cookie":"aaa=vbbb;"}
};
'<img src="'+src+","+JSON.stringify(options)+'">'
bookå¯¹è±¡çš„å¯ç”¨å±æ€§

ä½¿ç”¨æ–¹æ³•: åœ¨jsä¸­æˆ–{{}}ä¸­ä½¿ç”¨book.å±æ€§çš„æ–¹å¼å³å¯è·å–ï¼Œå¦‚åœ¨æ­£æ–‡å†…å®¹ååŠ ä¸Š##{{book.name+"æ­£æ–‡å·"+title}} å¯ä»¥å‡€åŒ– ä¹¦å+æ­£æ–‡å·+ç« èŠ‚åç§°ï¼ˆå¦‚ï¼šæˆ‘æ˜¯å¤§æ˜æ˜Ÿæ­£æ–‡å·ç¬¬äºŒç« æˆ‘çˆ¸æ˜¯è±ªé—¨æ€»è£ï¼‰ è¿™ä¸€ç±»çš„å­—ç¬¦
bookUrl             // è¯¦æƒ…é¡µUrl(æœ¬åœ°ä¹¦æºå­˜å‚¨å®Œæ•´æ–‡ä»¶è·¯å¾„)
tocUrl              // ç›®å½•é¡µUrl (toc=table of Contents)
origin              // ä¹¦æºURL(é»˜è®¤BookType.local)
originName          // ä¹¦æºåç§° or æœ¬åœ°ä¹¦ç±æ–‡ä»¶å
name                // ä¹¦ç±åç§°(ä¹¦æºè·å–)
author              // ä½œè€…åç§°(ä¹¦æºè·å–)
kind                // åˆ†ç±»ä¿¡æ¯(ä¹¦æºè·å–)
customTag           // åˆ†ç±»ä¿¡æ¯(ç”¨æˆ·ä¿®æ”¹)
coverUrl            // å°é¢Url(ä¹¦æºè·å–)
customCoverUrl      // å°é¢Url(ç”¨æˆ·ä¿®æ”¹)
intro               // ç®€ä»‹å†…å®¹(ä¹¦æºè·å–)
customIntro         // ç®€ä»‹å†…å®¹(ç”¨æˆ·ä¿®æ”¹)
charset             // è‡ªå®šä¹‰å­—ç¬¦é›†åç§°(ä»…é€‚ç”¨äºæœ¬åœ°ä¹¦ç±)
type                // 0:text 1:audio
group               // è‡ªå®šä¹‰åˆ†ç»„ç´¢å¼•å·
latestChapterTitle  // æœ€æ–°ç« èŠ‚æ ‡é¢˜
latestChapterTime   // æœ€æ–°ç« èŠ‚æ ‡é¢˜æ›´æ–°æ—¶é—´
lastCheckTime       // æœ€è¿‘ä¸€æ¬¡æ›´æ–°ä¹¦ç±ä¿¡æ¯çš„æ—¶é—´
lastCheckCount      // æœ€è¿‘ä¸€æ¬¡å‘ç°æ–°ç« èŠ‚çš„æ•°é‡
totalChapterNum     // ä¹¦ç±ç›®å½•æ€»æ•°
durChapterTitle     // å½“å‰ç« èŠ‚åç§°
durChapterIndex     // å½“å‰ç« èŠ‚ç´¢å¼•
durChapterPos       // å½“å‰é˜…è¯»çš„è¿›åº¦(é¦–è¡Œå­—ç¬¦çš„ç´¢å¼•ä½ç½®)
durChapterTime      // æœ€è¿‘ä¸€æ¬¡é˜…è¯»ä¹¦ç±çš„æ—¶é—´(æ‰“å¼€æ­£æ–‡çš„æ—¶é—´)
canUpdate           // åˆ·æ–°ä¹¦æ¶æ—¶æ›´æ–°ä¹¦ç±ä¿¡æ¯
order               // æ‰‹åŠ¨æ’åº
originOrder         //ä¹¦æºæ’åº
variable            // è‡ªå®šä¹‰ä¹¦ç±å˜é‡ä¿¡æ¯(ç”¨äºä¹¦æºè§„åˆ™æ£€ç´¢ä¹¦ç±ä¿¡æ¯)
chapterå¯¹è±¡çš„å¯ç”¨å±æ€§

ä½¿ç”¨æ–¹æ³•: åœ¨jsä¸­æˆ–{{}}ä¸­ä½¿ç”¨chapter.å±æ€§çš„æ–¹å¼å³å¯è·å–ï¼Œå¦‚åœ¨æ­£æ–‡å†…å®¹ååŠ ä¸Š##{{chapter.title+chapter.index}}å¯ä»¥å‡€åŒ– ç« èŠ‚æ ‡é¢˜+åºå·(å¦‚ ç¬¬äºŒç«  å¤©ä»™ä¸‹å‡¡2) è¿™ä¸€ç±»çš„å­—ç¬¦
url         // ç« èŠ‚åœ°å€
title       // ç« èŠ‚æ ‡é¢˜
baseUrl     // ç”¨æ¥æ‹¼æ¥ç›¸å¯¹url
bookUrl     // ä¹¦ç±åœ°å€
index       // ç« èŠ‚åºå·
resourceUrl // éŸ³é¢‘çœŸå®URL
tag         // ç« èŠ‚ä¿¡æ¯
start       // ç« èŠ‚èµ·å§‹ä½ç½®
end         // ç« èŠ‚ç»ˆæ­¢ä½ç½®
variable    // å˜é‡
 

å¦‚ä¸‹ç¤ºä¾‹ï¼Œåœ¨è¯¦æƒ…é¡µ(ç›®å½•é¡µ)å’Œæ­£æ–‡ä½¿ç”¨webViewåŠ è½½ï¼Œä¾‹ï¼š

{
  "bookSourceComment": "",
  "bookSourceGroup": "  æœ‰å£°",
  "bookSourceName": "çŒ«è€³FM",
  "bookSourceType": 1,
  "bookSourceUrl": "https://www.missevan.com",
  "customOrder": 0,
  "enabled": false,
  "enabledExplore": true,
  "lastUpdateTime": 0,
  "ruleBookInfo": {},
  "ruleContent": {
    "content": "https://static.missevan.com/{{//*[contains(@class,\"pld-sound-active\")]/@data-soundurl64}}",
    "sourceRegex": "",
    "webJs": ""
  },
  "ruleExplore": {},
"ruleSearch": {
    "author": "author",
    "bookList": "$.info.Datas",
    "bookUrl": "https://www.missevan.com/mdrama/drama/{{$.id}},{\"webView\":true}",
    "coverUrl": "cover ",
    "intro": "abstract",
    "kind": "{{$.type_name}},{{$.catalog_name}}",
    "lastChapter": "newest ",
    "name": "name",
    "wordCount": "catalog_name "
  },
  "ruleToc": {
    "chapterList": "@css:.scroll-list.btn-groups>a",
    "chapterName": "text",
    "chapterUrl": "href##$##,{\"webView\":true}"
  },
  "searchUrl": "https://www.missevan.com/dramaapi/search?s={{key}}&page=1",
  "weight": 0
}
 

æ­£æ–‡ä¸‹ä¸€é¡µURLè§„åˆ™(nextContentUrl)

æ”¯æŒå•ä¸ªurl
æ”¯æŒurlæ•°ç»„
WebViewJs(webJs)

ç”¨äºæ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç­‰æ“ä½œï¼Œå¿…é¡»æœ‰è¿”å›å€¼ï¼ˆä¸ä¸ºç©ºï¼Œè¡¨ç¤ºwebjsæ‰§è¡ŒæˆåŠŸï¼Œå¦åˆ™ä¼šæ— é™å¾ªç¯ï¼‰ï¼Œè¿”å›å€¼ä¼šç”¨äºèµ„æºæ­£åˆ™æˆ–æ­£æ–‡ä¸­
ä¸¾ä¸ªæ —å­ï¼Œåœ¨webJsä¸­æ‰§è¡Œäº†getDecode()ï¼Œä½¿æ­£æ–‡éƒ¨åˆ†è§£å¯†ï¼š
  {
    "bookSourceGroup": "é˜…è¯»3.0ä¹¦æºåˆé›†",
    "bookSourceName": "ğŸ”¥æ–‹ä¹¦è‹‘",
    "bookSourceType": 0,
    "bookSourceUrl": "https://www.zhaishuyuan.com",
    "bookUrlPattern": "",
    "customOrder": 11,
    "enabled": false,
    "enabledExplore": false,
    "exploreUrl": "ç”·ç”Ÿä¹¦åº“::/shuku/0_1_0_0_0_{{page}}_0_0\nç”·é¢‘è¿è½½::/shuku/0_2_0_0_0_{{page}}_0_0",
    "lastUpdateTime": 0,
    "loginUrl": "",
    "ruleBookInfo": {
      "author": "@css:[property=og:novel:author]@content",
      "coverUrl": "@css:[property=og:image]@content",
      "intro": "@css:#bookintro@html",
      "kind": "@css:[property=og:novel:category]@content",
      "lastChapter": "@css:[property=og:novel:latest_chapter_name]@content",
      "name": "@css:[property=og:novel:book_name]@content",
      "tocUrl": "@css:[property=og:novel:read_url]@content",
      "wordCount": "@css:.count li:eq(3)>span@text"
    },
    "ruleContent": {
      "content": "all",
      "nextContentUrl": "",
      "webJs": "getDecode();$('#content').html();"
    },
    "ruleExplore": {
      "author": "//li[4]/a/text()",
      "bookList": "//ul[count(../ul)>10]",
      "bookUrl": "//li[3]/a/@href",
      "coverUrl": "##/book/(\\d+)##https://img.zhaishuyuan.com/bookpic/s$1.jpg###",
      "intro": "//li[6]/text()",
      "kind": "//li[2]/text()##\\[|\\]",
      "lastChapter": "//span/a/text()",
      "name": "//li[3]/a/text()",
      "wordCount": "//li[5]/text()"
    },
    "ruleSearch": {
      "author": "//dd[2]/span[1]/text()",
      "bookList": "//*[@id=\"sitembox\"]/dl",
      "bookUrl": "//dt/a/@href",
      "coverUrl": "//img/@_src",
      "intro": "//dd[3]/html()",
      "kind": "//dd[2]/span[3]/text()",
      "lastChapter": "//dd[4]/a/text()",
      "name": "//h3/a//text()",
      "wordCount": "//dd[2]/span[4]/text()"
    },
    "ruleToc": {
      "chapterList": ":href=\"(/chapter/[^\"]*)\"[^>]*>([^<]*)</a>([^<]*)",
      "chapterName": "$2",
      "chapterUrl": "$1,{\"webView\":true}",
      "nextTocUrl": "//strong/following-sibling::a/@href",
      "updateTime": "$3"
    },
    "searchUrl": "/search/,{\n  \"charset\": \"gbk\",\n  \"method\": \"POST\",\n  \"body\": \"page={{page}}&key={{key}}\"\n}",
    "weight": 0
  }
èµ„æºæ­£åˆ™(sourceRegex)

ç”¨äºå—…æ¢

ä¸€èˆ¬æƒ…å†µä¸‹çš„æ— è„‘æ•™ç¨‹å¦‚ä¸‹

ç« èŠ‚é“¾æ¥åé¢åŠ  ,{"webView":true}ï¼Œä¸è¦æ´’æ•·æ•·çš„å†™æˆ tag.a@href,{"webView":true}æˆ–$.link,{"webView":true}ï¼Œæ­£ç¡®å†™æ³•å¦‚:tag.a@href##$##{"webView":true},{{@@tag.a@href}},{"webView":true},tag.a@href@js:result+',{"webView":true}'ç­‰
åœ¨æœ‰å—…æ¢åŠŸèƒ½çš„æµè§ˆå™¨ï¼ˆå¦‚ï¼šviaã€xæµè§ˆå™¨ç­‰ï¼‰ä¸­ï¼Œè¾“å…¥ç« èŠ‚é“¾æ¥ã€‚æ³¨æ„ åƒä¸‡åˆ«å¸¦,{"webView":true}
åª’ä½“å¼€å§‹æ’­æ”¾åä½¿ç”¨æµè§ˆå™¨çš„å—…æ¢åŠŸèƒ½ï¼ŒæŸ¥çœ‹èµ„æºçš„é“¾æ¥
åœ¨èµ„æºæ­£åˆ™é‡Œå¡«å†™èµ„æºé“¾æ¥çš„æ­£åˆ™ï¼Œä¸€èˆ¬å†™.*\.(mp3|mp4).*è¿™ä¸ªå°±å¯ä»¥äº†
æœ€ååœ¨æ­£æ–‡å¡«å†™ <js>result</js>
å¦‚ä¸‹ç¤ºä¾‹ï¼Œåœ¨æ­£æ–‡å—…æ¢mp3å’Œmp4çš„èµ„æºï¼š

{
  "bookSourceComment": "",
  "bookSourceGroup": "  æœ‰å£°",
  "bookSourceName": "çŒ«è€³FM",
  "bookSourceType": 1,
  "bookSourceUrl": "https://www.missevan.com",
  "customOrder": 0,
  "enabled": false,
  "enabledExplore": true,
  "lastUpdateTime": 0,
  "ruleBookInfo": {},
  "ruleContent": {
    "content": "https://static.missevan.com/{{//*[contains(@class,\"pld-sound-active\")]/@data-soundurl64}}",
    "sourceRegex": "",
    "webJs": ""
  },
  "ruleExplore": {},
"ruleSearch": {
    "author": "author",
    "bookList": "$.info.Datas",
    "bookUrl": "https://www.missevan.com/mdrama/drama/{{$.id}},{\"webView\":true}",
    "coverUrl": "cover ",
    "intro": "abstract",
    "kind": "{{$.type_name}},{{$.catalog_name}}",
    "lastChapter": "newest ",
    "name": "name",
    "wordCount": "catalog_name "
  },
  "ruleToc": {
    "chapterList": "@css:.scroll-list.btn-groups>a",
    "chapterName": "text",
    "chapterUrl": "href##$##,{\"webView\":true}"
  },
  "searchUrl": "https://www.missevan.com/dramaapi/search?s={{key}}&page=1",
  "weight": 0
}















## è¡¥å……è¯´æ˜
æ˜¾ç¤ºjsçš„æŠ¥é”™ä¿¡æ¯

(function(result){
    try{
          // å¤„ç†result
          // ...
          // å½“è¿”å›ç»“æœä¸ºå­—ç¬¦ä¸²æ—¶
          return result;
          // å½“è¿”å›ç»“æœä¸ºåˆ—è¡¨æ—¶
          return list;
    }
    catch(e){
          // å½“è¿”å›ç»“æœä¸ºå­—ç¬¦ä¸²æ—¶
          return ""+e;
          // å½“è¿”å›ç»“æœä¸ºåˆ—è¡¨æ—¶
          return [""+e];  //åˆ—è¡¨å¯¹åº”åç§°å¤„å¡«<js>""+result</js>æŸ¥çœ‹
    }
})(result);
è¯·å–„ç”¨è°ƒè¯•åŠŸèƒ½

è°ƒè¯•æœç´¢

è¾“å…¥å…³é”®å­—ï¼Œå¦‚ï¼šç³»ç»Ÿ

è°ƒè¯•å‘ç°

è¾“å…¥å‘ç°URLï¼Œå¦‚ï¼šæœˆç¥¨æ¦œ::https://www.qidian.com/rank/yuepiao?page={{page}}

è°ƒè¯•è¯¦æƒ…é¡µ

è¾“å…¥è¯¦æƒ…é¡µURLï¼Œå¦‚ï¼šhttps://m.qidian.com/book/1015609210

è°ƒè¯•ç›®å½•é¡µ

è¾“å…¥ç›®å½•é¡µURLï¼Œå¦‚ï¼š++https://www.zhaishuyuan.com/read/30394

è°ƒè¯•æ­£æ–‡é¡µ

è¾“å…¥æ­£æ–‡é¡µURLï¼Œå¦‚ï¼š--https://www.zhaishuyuan.com/chapter/30394/20940996

æ— è„‘{"webView":true}å¾ˆæ–¹ä¾¿

ç‰¹åˆ«æ³¨æ„ç”¨JSON.stringify()æ–¹æ³•æ—¶ï¼Œéœ€è¦ä¿è¯JSONå¯¹è±¡çš„valueéƒ½æ˜¯JavaScriptçš„Stringç±»å‹(åœ¨é˜…è¯»3.0ä¸­)

é™„ï¼š

ä¹¦æºä¸€

{
  "bookSourceComment": "",
  "bookSourceGroup": "CSS; æ­£åˆ™",
  "bookSourceName": "å°è¯´2016",
  "bookSourceType": 0,
  "bookSourceUrl": "https://www.xiaoshuo2016.com",
  "bookUrlPattern": "",
  "customOrder": 0,
  "enabled": true,
  "enabledExplore": false,
  "exploreUrl": "",
  "lastUpdateTime": 0,
  "loginUrl": "",
  "ruleBookInfo": {
    "author": "##:author\"[^\"]+\"([^\"]*)##$1###",
    "coverUrl": "##og:image\"[^\"]+\"([^\"]*)##$1###",
    "intro": "##:description\"[^\"]+\"([\\w\\W]*?)\"/##$1###",
    "kind": "##:category\"[^\"]+\"([^\"]*)##$1###",
    "lastChapter": "##_chapter_name\"[^\"]+\"([^\"]*)##$1###",
    "name": "##:book_name\"[^\"]+\"([^\"]*)##$1###",
    "tocUrl": ""
},
  "ruleContent": {
  "content": "@css:.articleDiv p@textNodes##æœç´¢.*æ‰‹æœºè®¿é—®|ä¸€ç§’è®°ä½.*|.*é˜…è¯»ä¸‹è½½|<!\\[CDATA\\[|\\]\\]>",
    "nextContentUrl": ""
  },
  "ruleExplore": {},
  "ruleSearch": {
    "author": "@css:p:eq(2)>a@text",
    "bookList": "@css:li.clearfix",
    "bookUrl": "@css:.name>a@href",
    "coverUrl": "@css:img@src",
    "intro": "@css:.note.clearfix p@text",
    "kind": "@css:.note_text,p:eq(4)@text",
    "lastChapter": "@css:p:eq(3)@text",
    "name": "@css:.name@text"
  },
  "ruleToc": {
    "chapterList": "-:<li><a[^\"]+\"([^\"]*)\">([^<]*)",
    "chapterName": "$2",
    "chapterUrl": "$1",
    "nextTocUrl": ""
  },
  "searchUrl": "/modules/article/search.php?searchkey={{key}}&submit=&page={{page}},{\n  \"charset\": \"gbk\"\n}",
  "weight": 0
}
 

 

ä¹¦æºäºŒ

{
  "bookSourceComment": "",
  "bookSourceGroup": "XPath; æ­£åˆ™",
  "bookSourceName": "é‡‡å¢¨é˜æ‰‹æœºç‰ˆ",
  "bookSourceType": 0,
  "bookSourceUrl": "https://m.caimoge.com",
  "bookUrlPattern": "",
  "customOrder": 0,
  "enabled": true,
  "enabledExplore": false,
  "exploreUrl": "",
  "lastUpdateTime": 0,
  "loginUrl": "",
  "ruleBookInfo": {
    "author": "//*[@property=\"og:novel:author\"]/@content",
    "coverUrl": "//*[@property=\"og:image\"]/@content",
    "intro": "//*[@property=\"og:description\"]/@content",
    "kind": "//*[@property=\"og:novel:category\"]/@content",
    "lastChapter": "//*[@id=\"newlist\"]//li[1]/a/text()",
    "name": "//*[@property=\"og:novel:book_name\"]/@content",
    "tocUrl": "//a[text()=\"é˜…è¯»\"]/@href"
  },
  "ruleContent": {
    "content": "//*[@id=\"content\"]",
    "nextContentUrl": ""
  },
  "ruleExplore": {},
  "ruleSearch": {
    "author": "//dd[2]/text()",
    "bookList": "//*[@id=\"sitebox\"]/dl",
    "bookUrl": "//dt/a/@href",
    "coverUrl": "//img/@src",
    "kind": "//dd[2]/span/text()",
    "lastChapter": "",
    "name": "//h3/a/text()"
  },
  "ruleToc": {
    "chapterList": ":href=\"(/read[^\"]*html)\">([^<]*)",
    "chapterName": "$2",
    "chapterUrl": "$1",
    "nextTocUrl": "//*[@id=\"pagelist\"]/*[position()>1]/@value"
  },
  "searchUrl": "/search.html,{\n  \"method\": \"POST\",\n  \"body\": \"searchkey={{key}}\"\n}",
  "weight": 0
}
 

ä¹¦æºä¸‰

{
  "bookSourceComment": "",
  "bookSourceGroup": "JSon",
  "bookSourceName": "çŒé¹°å°è¯´ç½‘",
  "bookSourceType": 0,
  "bookSourceUrl": "http://api.book.lieying.cn",
  "customOrder": 0,
  "enabled": true,
  "enabledExplore": false,
  "header": "{\n  \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\"\n}",
  "lastUpdateTime": 0,
  "ruleBookInfo": {},
  "ruleContent": {
    "content": "$.chapter.body"
  },
  "ruleExplore": {},
  "ruleSearch": {
    "author": "$.author",
    "bookList": "$..books[*]",
    "bookUrl": "/Book/getChapterListByBookId?bookId={$._id}",
    "coverUrl": "$.cover",
    "intro": "$.shortIntro",
    "kind": "$.minorCate",
    "lastChapter": "$.lastChapter",
    "name": "$.title"
  },
  "ruleToc": {
    "chapterList": "$.chapterInfo.chapters.[*]",
    "chapterName": "$.title",
    "chapterUrl": "$.link"
  },
  "searchUrl": "/Book/search?query={{key}}&start={{(page-1)*20}}&limit=40&device_type=android&app_version=165",
  "weight": 0
}